# v0.31.x series (next stable)

## v0.31.0 (upcoming release)

### Removed

* ‚ö†Ô∏è The experimental {mod}`eradiate.scenes.biosphere.canopies` module is
  removed ({ghpr}`493`). This, in particular, removes the
  {func}`.wellington_citrus_orchard` function. Instead, use the canopy loader.

### Added

* üñ•Ô∏è Added support of the Robot framework to generate rich HTML test reports
  ({ghpr}`478`).
* üñ•Ô∏è Added new regression tests based on bias-variance ratios ({ghpr}`483`).
* Added a {func}`.get_mode` getter that aims to replace {func}`.mode`
  ({ghpr}`486`). The {func}`.mode` getter remains available for compatibility.
* Added the `tuber` 0.1 nm-resolution CKD database ({ghpr}`495`).

### Changed

* ‚ö†Ô∏è Expert interface entry points have been renamed for clarity ({ghpr}`484`):
    * {class}`.KernelDictTemplate` is now {class}`.KernelDict`.
    * {class}`.UpdateMapTemplate` is now {class}`.KernelSceneParameterMap`.
    * {class}`.InitParameter` is now {class}`.DictParameter` and matches the
      {func}`.dict_parameter` decorator.
    * {class}`.UpdateParameter` is now {class}`.SceneParameter` and matches the
      {func}`.scene_parameter` decorator.
    * The {class}`.UpdateParameter.Flags` enum is no longer in the
      {class}`.UpdateParameter` namespace and is now named
      {class}`.KernelSceneParameterFlags`.
    * {class}`.TypeIDLookupStrategy` is now {class}`.SearchSceneParameter`.

* ‚ö†Ô∏è The {func}`.get_mode` getter now raises an {class}`.UnsetModeError` if no
  active mode is selected ({ghpr}`486`).
* ‚ö†Ô∏è The data handling infrastructure has been overhauled ({ghpr}`493`; see
  {ref}`sec-data-intro` for details):

  * File paths are now resolved by an offline file resolver, accessed as
    {data}`eradiate.fresolver`.
  * The `eradiate data fetch` command no longer exists and is replaced by
    `eradiate data install`.
  * Settings have been updated to adapt to the new data handling infrastructure.

* ‚ö†Ô∏è The settings pertaining to data management have changed ({ghpr}`493`).
  Now, use `DATA_PATH` to control downloaded data location, `DATA_URL` to
  control the remote registry location, and `PATH` to add lookup locations to
  the file resolver.
* ‚ö†Ô∏è The `ERADIATE_ENV` environment variable is no longer used ({ghpr}`493`).
* ‚ö†Ô∏è The default monochromatic dataset is now `komodo` ({ghpr}`493`). That
  default was not used consistently before.

### Fixed

* üñ•Ô∏è Fixed logger configuration inconsistencies depending on the pytest tests
  execution order ({ghpr}`478`).
* Added missing {class}`.HapkeBSDF` factory keyword ({ghpr}`491`).
* Added missing irradiance spectrum scene parameters for the
  {class}`.AstroObjectIllumination` class ({ghpr}`494`).

### Internal changes

* üñ•Ô∏è The {func}`.mode` getter is now a thin compatibility wrapper around
  {func}`.get_mode` ({ghpr}`486`).
* üñ•Ô∏è Added a GitHub CI supporting Robot reports generation ({ghpr}`482`).
* üñ•Ô∏è Improved post-processing pipeline test efficiency ({ghpr}`492`).
* üñ•Ô∏è All {class}`.DataStore` classes are replaced by {class}`.FileResolver`
  and {class}`.AssetManager` classes ({ghpr}`493`).
* üñ•Ô∏è Refactored Converters to provide a more modular data conversion toolkit
  ({ghpr}`493`).
* üñ•Ô∏è Transitioned development requirements to PEP 735 dependency groups instead
  of extras ({ghpr}`493`).
* üñ•Ô∏è Factored CLI terminal display components into a module to avoid code
  duplication ({ghpr}`493`).
