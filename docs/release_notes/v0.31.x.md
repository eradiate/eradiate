# v0.31.x series (current stable)

## v0.31.0 (5th September 2025)

```{warning}
This version introduces major changes to the Expert interface and data delivery.
Read the following for migration instructions.

* **Expert interface update.**
  The changes made to the Expert interface are only naming changes. The
  mapping between the old and new names is as follows:

  Old name (in {mod}`eradiate.kernel`) | New name
  -------------------------------------|-------------------------------------
  {class}`.KernelDictTemplate`         | {class}`.KernelDict`
  {class}`.UpdateMapTemplate`          | {class}`.KernelSceneParameterMap`
  {class}`.InitParameter`              |  {class}`.DictParameter`
  {class}`.UpdateParameter`            | {class}`.SceneParameter`
  {class}`.UpdateParameter.Flags`      | {class}`.KernelSceneParameterFlags`
  {class}`.TypeIDLookupStrategy`       | {class}`.SearchSceneParameter`

* **Data delivery.**
  The new data delivery system is broken down into an {class}`.AssetManager`,
  which manages data downloads and makes them available for consumption, and a
  {class}`.FileResolver`, which looks up the filesystem when resources are
  requested. For end-users, the main difference is that after installing or
  updating Eradiate, they should call `eradiate data install` in a terminal
  instead of `eradiate data fetch`.
```

### Deprecated

* ‚ö†Ô∏è The {mod}`eradiate.notebook.tutorials` module is now deprecated, and its
  contents are now in {mod}`eradiate.tutorials`. The `eradiate.notebook.tutorials`
  IPYthon extension is replaced by `eradiate.tutorials`.
* The `eradiate show` command is deprecated in favour of `eradiate sys-info`.

### Removed

* ‚ö†Ô∏è The experimental {mod}`eradiate.scenes.biosphere.canopies` module is
  removed ({ghpr}`493`). This, in particular, removes the
  {func}`.wellington_citrus_orchard` function. Instead, use the canopy loader.

### Added

* üñ•Ô∏è Added support of the Robot framework to generate rich HTML test reports
  ({ghpr}`478`).
* üñ•Ô∏è Added new regression tests based on bias-variance ratios ({ghpr}`483`).
* Added a {func}`.get_mode` getter that aims to replace {func}`.mode`
  ({ghpr}`486`). The {func}`.mode` getter remains available for compatibility.
* Added the `tuber` 0.1 nm-resolution CKD database ({ghpr}`495`).
* Added a converter for libRadtran's NetCDF aerosol data files ({ghpr}`499`).
* The `eradiate --version` flag now displays version information in the terminal
  ({ghpr}`508`).

### Changed

* ‚ö†Ô∏è Expert interface entry points have been renamed for clarity ({ghpr}`484`):
    * {class}`.KernelDictTemplate` is now {class}`.KernelDict`.
    * {class}`.UpdateMapTemplate` is now {class}`.KernelSceneParameterMap`.
    * {class}`.InitParameter` is now {class}`.DictParameter` and matches the
      {func}`.dict_parameter` decorator.
    * {class}`.UpdateParameter` is now {class}`.SceneParameter` and matches the
      {func}`.scene_parameter` decorator.
    * The {class}`.UpdateParameter.Flags` enum is no longer in the
      {class}`.UpdateParameter` namespace and is now named
      {class}`.KernelSceneParameterFlags`.
    * {class}`.TypeIDLookupStrategy` is now {class}`.SearchSceneParameter`.

* ‚ö†Ô∏è The {func}`.get_mode` getter now raises an {class}`.UnsetModeError` if no
  active mode is selected ({ghpr}`486`).
* ‚ö†Ô∏è The data handling infrastructure has been overhauled ({ghpr}`493`; see
  {ref}`sec-data-intro` for details):

  * File paths are now resolved by an offline file resolver, accessed as
    {data}`eradiate.fresolver`.
  * The `eradiate data fetch` command no longer exists and is replaced by
    `eradiate data install`.
  * Settings have been updated to adapt to the new data handling infrastructure.

* ‚ö†Ô∏è The settings pertaining to data management have changed ({ghpr}`493`).
  Now, use `DATA_PATH` to control downloaded data location, `DATA_URL` to
  control the remote registry location, and `PATH` to add lookup locations to
  the file resolver. The following settings are no longer relevant:

  * `DATA_STORE_URL`
  * `SMALL_FILES_REGISTRY_URL`
  * `SMALL_FILES_REGISTRY_REVISION`

* ‚ö†Ô∏è The `ERADIATE_ENV` environment variable is no longer used ({ghpr}`493`).
* ‚ö†Ô∏è The default monochromatic dataset is now `komodo` ({ghpr}`493`). That
  default was not used consistently before.
* üìñ Documentation layout is reorganized for improved maintainability
  ({ghpr}`497`).
* ‚ö†Ô∏è The {class}`.RectangleTarget` class now accepts a normal-based
  parametrization ({ghpr}`500`).
* ‚ö†Ô∏è The {mod}`eradiate.notebook.tutorials` module is now deprecated, and its
  contents are now in {mod}`eradiate.tutorials`. The `eradiate.notebook.tutorials`
  IPYthon extension is replaced by `eradiate.tutorials`.
* The `eradiate show` command is renamed `eradiate sys-info` ({ghpr}`508`).

### Fixed

* üñ•Ô∏è Fixed logger configuration inconsistencies depending on the pytest tests
  execution order ({ghpr}`478`).
* Added missing {class}`.HapkeBSDF` factory keyword ({ghpr}`491`).
* Added missing irradiance spectrum scene parameters for the
  {class}`.AstroObjectIllumination` class ({ghpr}`494`).
* Aligned canonical spectral range with actual absorption database limits
  ({ghpr}`498`).
* Fixed {func}`.film_to_angular` when used on data with multiple spectral
  channels ({ghpr}`501`).
* The {class}`.ParticleLayer` class can now use aerosol property datasets with a
  single wavelength ({ghpr}`502`).
* Improved the error message when failing to load a solar irradiance spectrum
  ({ghpr}`507`).

### Internal changes

* üñ•Ô∏è The {func}`.mode` getter is now a thin compatibility wrapper around
  {func}`.get_mode` ({ghpr}`486`).
* üñ•Ô∏è Added a GitHub CI supporting Robot reports generation ({ghpr}`482`).
* üñ•Ô∏è Improved post-processing pipeline test efficiency ({ghpr}`492`).
* üñ•Ô∏è All {class}`.DataStore` classes are replaced by {class}`.FileResolver`
  and {class}`.AssetManager` classes ({ghpr}`493`).
* üñ•Ô∏è Refactored Converters to provide a more modular data conversion toolkit
  ({ghpr}`493`).
* üñ•Ô∏è Transitioned development requirements to PEP 735 dependency groups instead
  of extras ({ghpr}`493`).
* üñ•Ô∏è Factored CLI terminal display components into a module to avoid code
  duplication ({ghpr}`493`).
* üñ•Ô∏è The postprocessing pipeline definitions were moved to a separate package
  that can be referenced at driver construction {{ghpr}`506`}.

## v0.31.1 (upcoming release)

### Changed

* ‚ö†Ô∏è üñ•Ô∏è The {meth}`Experiment.context`, {meth}`Experiment.context_init` and
  {meth}`Experiment._context_kwargs` properties have been turned into regular
  methods, effectively allowing to pass additional contextual information when
  calling them ({ghpr}`515`).

### Fixed

* Improved kernel context generation to avoid unnecessary processing in a
  multi-measure setup ({ghpr}`515`).
* Improved {func}`eradiate.run` return value consistency ({ghpr}`516`).
